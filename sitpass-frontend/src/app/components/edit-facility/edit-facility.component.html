<div class="mx-auto max-w-5xl space-y-4">
  <div class="rounded-2xl bg-slate-900 p-6 text-slate-100 shadow-lg">
    <h2 class="text-2xl font-semibold">Izmeni objekat</h2>
    <p class="mt-1 text-sm text-slate-300">Azuriraj podatke objekta i po potrebi zameni PDF opis.</p>
  </div>

  <form (ngSubmit)="onSubmit()" class="grid gap-4 lg:grid-cols-3">
    <section class="rounded-2xl border border-slate-200 bg-white p-5 shadow-sm lg:col-span-2">
      <h3 class="mb-4 text-lg font-semibold text-slate-800">Osnovne informacije</h3>

      <div class="grid gap-4 md:grid-cols-2">
        <label class="flex flex-col gap-1 text-sm text-slate-700">
          Naziv objekta
          <input type="text" [(ngModel)]="facility.name" name="name" required class="rounded-lg border border-slate-300 px-3 py-2" />
        </label>

        <label class="flex flex-col gap-1 text-sm text-slate-700">
          Grad
          <input type="text" [(ngModel)]="facility.city" name="city" required class="rounded-lg border border-slate-300 px-3 py-2" />
        </label>
      </div>

      <label class="mt-4 flex flex-col gap-1 text-sm text-slate-700">
        Adresa
        <input type="text" [(ngModel)]="facility.address" name="address" required class="rounded-lg border border-slate-300 px-3 py-2" />
      </label>

      <label class="mt-4 flex flex-col gap-1 text-sm text-slate-700">
        Opis
        <textarea [(ngModel)]="facility.description" name="description" rows="5" required class="rounded-lg border border-slate-300 px-3 py-2"></textarea>
      </label>
    </section>

    <section class="rounded-2xl border border-slate-200 bg-white p-5 shadow-sm">
      <h3 class="mb-4 text-lg font-semibold text-slate-800">PDF</h3>

      <div class="rounded-lg bg-slate-50 p-3 text-xs text-slate-600" *ngIf="facility.pdfFileName">
        Trenutni PDF: {{ facility.pdfFileName }}
      </div>

      <label class="mt-3 flex flex-col gap-1 text-sm text-slate-700">
        Novi PDF (opciono)
        <input
          type="file"
          accept="application/pdf"
          (change)="onPdfSelected($event)"
          class="rounded-lg border border-slate-300 px-3 py-2 file:mr-3 file:rounded-md file:border-0 file:bg-slate-100 file:px-3 file:py-1.5"
        />
      </label>

      <div *ngIf="selectedPdfFile" class="mt-3 rounded-lg bg-slate-50 p-3 text-xs text-slate-600">
        Izabran fajl: {{ selectedPdfFile.name }}
      </div>
    </section>

    <section class="rounded-2xl border border-slate-200 bg-white p-5 shadow-sm lg:col-span-3">
      <div class="mb-3 flex items-center justify-between">
        <h3 class="text-lg font-semibold text-slate-800">Discipline</h3>
        <button type="button" (click)="addDiscipline()" class="rounded-md bg-emerald-600 px-3 py-1.5 text-sm text-white hover:bg-emerald-500">Dodaj disciplinu</button>
      </div>

      <div class="grid gap-3 md:grid-cols-2" *ngIf="disciplines.length > 0">
        <div *ngFor="let discipline of disciplines; let i = index" class="flex items-center gap-2">
          <input type="text" [(ngModel)]="disciplines[i].name" [name]="'discipline' + i" class="w-full rounded-lg border border-slate-300 px-3 py-2" />
          <button type="button" (click)="removeDiscipline(i)" class="rounded-md bg-rose-100 px-2 py-2 text-rose-700">X</button>
        </div>
      </div>
    </section>

    <section class="rounded-2xl border border-slate-200 bg-white p-5 shadow-sm lg:col-span-3">
      <div class="mb-3 flex items-center justify-between">
        <h3 class="text-lg font-semibold text-slate-800">Radni dani</h3>
        <button type="button" (click)="addWorkDay()" class="rounded-md bg-emerald-600 px-3 py-1.5 text-sm text-white hover:bg-emerald-500">Dodaj dan</button>
      </div>

      <div class="space-y-3">
        <div *ngFor="let workDay of workDays; let j = index" class="grid gap-2 rounded-xl border border-slate-200 p-3 md:grid-cols-5">
          <select [(ngModel)]="workDays[j].day" [name]="'workDayDay' + j" class="rounded-lg border border-slate-300 px-2 py-2">
            <option value="">Dan</option>
            <option *ngFor="let day of dayOptions" [value]="day">{{ day }}</option>
          </select>
          <input type="time" [(ngModel)]="workDays[j].startTime" [name]="'workDayStart' + j" class="rounded-lg border border-slate-300 px-2 py-2" />
          <input type="time" [(ngModel)]="workDays[j].endTime" [name]="'workDayEnd' + j" class="rounded-lg border border-slate-300 px-2 py-2" />
          <input type="date" [(ngModel)]="workDays[j].validFrom" [name]="'validFrom' + j" class="rounded-lg border border-slate-300 px-2 py-2" />
          <button type="button" (click)="removeWorkDay(j)" class="rounded-md bg-rose-100 px-3 py-2 text-rose-700">Obrisi</button>
        </div>
      </div>
    </section>

    <div class="flex items-center gap-3 lg:col-span-3">
      <button type="submit" [disabled]="isSubmitting" class="rounded-lg bg-cyan-600 px-5 py-2.5 font-medium text-white hover:bg-cyan-500 disabled:opacity-60">
        {{ isSubmitting ? 'Cuvanje...' : 'Sacuvaj izmene' }}
      </button>
      <a routerLink="/facilities" class="text-sm text-slate-600 hover:text-slate-900">Nazad na listu</a>
    </div>
  </form>
</div>